#!/bin/bash

echo "ğŸš€ LifeStock ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ"
echo "=============================================="

# 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
echo "ğŸ“¦ ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­..."
npm install

# 2. ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
if [ ! -f .env ]; then
    echo "ğŸ“„ ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆä¸­..."
    cp .env.example .env
    echo "âœ… .env ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚Firebaseè¨­å®šã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"
else
    echo "âœ… .env ãƒ•ã‚¡ã‚¤ãƒ«ã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™ã€‚"
fi

# 3. Firebase CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
if ! command -v firebase &> /dev/null; then
    echo "ğŸ”¥ Firebase CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­..."
    npm install -g firebase-tools
else
    echo "âœ… Firebase CLIã¯æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã™ã€‚"
fi

echo ""
echo "ğŸ‰ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ï¼"
echo ""
echo "æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:"
echo "1. .env ãƒ•ã‚¡ã‚¤ãƒ«ã«Firebaseè¨­å®šã‚’å…¥åŠ›"
echo "2. firebase login ã§ãƒ­ã‚°ã‚¤ãƒ³"
echo "3. firebase use your-project-id ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ"
echo "4. npm run dev ã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•"
echo ""
echo "è©³ç´°ã¯ README.md ã‚’ã”ç¢ºèªãã ã•ã„ã€‚"
